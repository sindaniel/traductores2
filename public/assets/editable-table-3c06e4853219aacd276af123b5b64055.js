var EditableTable=function(){return{init:function(){function e(e,a){for(var t=e.fnGetData(a),l=$(">td",a),n=0,r=l.length;r>n;n++)e.fnUpdate(t[n],a,n,!1);e.fnDraw()}function a(e,a){var t=e.fnGetData(a),l=$(">td",a);l[0].innerHTML='<input type="text" class="form-control small" value="'+t[0]+'">',l[1].innerHTML='<input type="text" class="form-control small" value="'+t[1]+'">',l[2].innerHTML='<input type="text" class="form-control small" value="'+t[2]+'">',l[3].innerHTML='<input type="text" class="form-control small" value="'+t[3]+'">',l[4].innerHTML='<a class="edit" href="">Save</a>',l[5].innerHTML='<a class="cancel" href="">Cancel</a>'}function t(e,a){var t=$("input",a);e.fnUpdate(t[0].value,a,0,!1),e.fnUpdate(t[1].value,a,1,!1),e.fnUpdate(t[2].value,a,2,!1),e.fnUpdate(t[3].value,a,3,!1),e.fnUpdate('<a class="edit" href="">Edit</a>',a,4,!1),e.fnUpdate('<a class="delete" href="">Delete</a>',a,5,!1),e.fnDraw()}var l=$("#editable-sample").dataTable({aLengthMenu:[[5,15,20,-1],[5,15,20,"All"]],iDisplayLength:5,sDom:"<'row'<'col-lg-6'l><'col-lg-6'f>r>t<'row'<'col-lg-6'i><'col-lg-6'p>>",sPaginationType:"bootstrap",oLanguage:{sLengthMenu:"_MENU_ records per page",oPaginate:{sPrevious:"Prev",sNext:"Next"}},aoColumnDefs:[{bSortable:!1,aTargets:[0]}]});jQuery("#editable-sample_wrapper .dataTables_filter input").addClass("form-control medium"),jQuery("#editable-sample_wrapper .dataTables_length select").addClass("form-control xsmall");var n=null;$("#editable-sample_new").click(function(e){e.preventDefault();var t=l.fnAddData(["","","","",'<a class="edit" href="">Edit</a>','<a class="cancel" data-mode="new" href="">Cancel</a>']),r=l.fnGetNodes(t[0]);a(l,r),n=r}),$("#editable-sample a.delete").live("click",function(e){if(e.preventDefault(),0!=confirm("Are you sure to delete this row ?")){var a=$(this).parents("tr")[0];l.fnDeleteRow(a),alert("Deleted! Do not forget to do some ajax to sync with backend :)")}}),$("#editable-sample a.cancel").live("click",function(a){if(a.preventDefault(),"new"==$(this).attr("data-mode")){var t=$(this).parents("tr")[0];l.fnDeleteRow(t)}else e(l,n),n=null}),$("#editable-sample a.edit").live("click",function(r){r.preventDefault();var o=$(this).parents("tr")[0];null!==n&&n!=o?(e(l,n),a(l,o),n=o):n==o&&"Save"==this.innerHTML?(t(l,n),n=null,alert("Updated! Do not forget to do some ajax to sync with backend :)")):(a(l,o),n=o)})}}}();